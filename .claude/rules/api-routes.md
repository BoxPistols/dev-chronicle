---
paths:
  - "src/app/api/**/*.ts"
---

# APIルート規約

- すべてのAPIルートは Next.js Route Handlers (App Router) で実装
- 外部APIキーはサーバーサイドでのみ使用し、レスポンスに含めない
- 入力パラメータのバリデーションを必ず行い、不正な場合は適切なHTTPステータスとエラーメッセージを返す
- エラーメッセージは日本語で返す
- `next: { revalidate: 300 }` でキャッシュを有効化する（外部API呼び出し時）
- 外部API障害時は 502 ステータスを返す
